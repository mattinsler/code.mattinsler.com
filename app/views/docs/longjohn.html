<header>
  <p class="name">longjohn</p>
  <p class="description">Long stack traces for <a href="http://nodejs.org/" target="_blank">node.js</a> with configurable call trace length</p>
  <a href="https://github.com/mattinsler/longjohn" class="github">Fork me on Github</a>
</header>

<article>
  <section id="inspiration">
    <h3>Inspiration</h3>
    
    <p>
      I wrote this while trying to add <a href="https://github.com/tlrobinson/long-stack-traces" target="_blank">long-stack-traces</a> to my server and realizing that there were issues with support of <a href="http://nodejs.org/api/events.html#events_emitter_removelistener_event_listener" target="_blank">EventEmitter::removeListener</a>.  The node HTTP Server will begin to leak callbacks and any of your own code that relies on removing listeners would not work as anticipated.
    </p>
    <p>
      So what to do...  I stole the code and rewrote it.  I've added support for removeListener along with the ability to cut off the number of async calls the library will trace.  I hope you like it!
    </p>
    <p>
      Please thank <a href="https://github.com/tlrobinson" target="_blank">tlrobinson</a> for the initial implementation!
    </p>
  </section>
  
  <section id="installation">
    <h3>Installation</h3>
    
    <p>Just npm install it!</p>
    <pre class="prettyprint">npm install longjohn</pre>
  </section>
  
  <section id="usage">
    <h3>Usage</h3>
    
    <p>To use longjohn, require it in your code (probably in some initialization code).  That's all!</p>
    <pre class="prettyprint">
require('longjohn');

// ... your code</pre>
  </section>
  
  <section id="options">
    <h3>Options</h3>
    
    <h4>Limit traced async calls</h4>
    
    <pre class="prettyprint">
longjohn.async_trace_limit = 5;   // defaults to 10
longjohn.async_trace_limit = -1;  // unlimited</pre>
    
    <h4>Change callback frame text</h4>

    <pre class="prettyprint">
longjohn.empty_frame = 'ASYNC CALLBACK';  // defaults to '---------------------------------------------'</pre>
  </section>
</article>